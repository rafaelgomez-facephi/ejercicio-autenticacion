<html>
  <head> </head>
  <body>
    <p id="greeting">Hello Anonymous</p>
    <p id="data">Hidden data</p>
    <button id="btn"></button>
  </body>
  <script>
    let btn = document.getElementById("btn");
    let greetingMessage = document.getElementById("greeting");
    let dataMessage = document.getElementById("data");
    let email;
    const req = new XMLHttpRequest();

    req.open('GET', '/api/protectedData', false);

    req.send();

    email = req.getResponseHeader("Gap-Auth");

    greetingMessage.innerHTML = email ? email : "Hello Anonymous";
    dataMessage.innerHTML = email ? req.responseText : "Hidden data";

    btn.innerText = email ? "Logout" : "Login";

    btn.addEventListener('click', () => window.location.href = email ? "/oauth2/sign_out" : "/oauth2/sign_in")
  </script>
</html>
