<html>
  <head> </head>
  <body>
    <p id="greeting">Hello Anonymous</p>
    <p id="data">Hidden data</p>
    <button id="btn-data">Get data</button>
    <button id="btn-logout">Log out</button>
  </body>
  <script>
    document.getElementById("btn-data").addEventListener("click", () => {
        fetch("/oauth2/userinfo")
            .then((e) => e.json())
            .then((data) => document.getElementById("greeting").innerHTML = data.email)
            .catch(e => document.getElementById("greeting").innerHTML = "Hello Anonymous");

        fetch("/api/protectedData")
            .then((e) => e.json())
            .then((data) => document.getElementById("data").innerHTML = data.message ? data.message : "Hidden data")
    });
    document.getElementById("btn-logout").addEventListener("click", () => {
      fetch("/oauth2/sign_out").then((e) => (window.location.href = "/"));
    });
  </script>
</html>
