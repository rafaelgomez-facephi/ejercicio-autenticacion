<html>
  <head> </head>
  <body>
    <p id="greeting">Hello Anonymous</p>
    <p id="data">Hidden data</p>
    <button id="btn-login">Login</button>
    <button id="btn-logout">Log out</button>
  </body>
  <script>
    let btnLogin = document.getElementById("btn-login");
    let btnLogout = document.getElementById("btn-logout");
    let greetingMessage = document.getElementById("greeting");
    let dataMessage = document.getElementById("data");
    let email;

    fetch("/oauth2/userinfo")
            .then((e) => e.json())
            .then((data) => greetingMessage.innerHTML = data.email)
            .catch(e => greetingMessage.innerHTML = "Hello Anonymous");

    fetch("/api/protectedData")
        .then((e) => e.json()).then((data) => dataMessage.innerHTML = data.message ? data.message : "Hidden data")


    btnLogin.addEventListener("click", () => {
      window.location.href = "/oauth2/sign_in";
    });
    btnLogout.addEventListener("click", () => {
      window.location.href = "/oauth2/sign_out";
    });
  </script>
</html>
