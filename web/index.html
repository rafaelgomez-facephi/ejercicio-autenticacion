<html>
  <head> </head>
  <body>
    <p id="greeting">Hello Anonymous2</p>
    <p id="data">Hidden data</p>
    <button id="btn-login">Log in</button>
    <button id="btn-logout">Log out</button>
    <button id="btn-data">Pull data</button>
  </body>
  <script>
    document.getElementById("btn-login").addEventListener("click", () => {
      fetch("http://localhost:4180/api/protectedData",{
      method: "GET",
      credentials: "include",
      mode: "cors"
    }).then((e) => e.json()).then( data => {
      document.getElementById('data').innerHTML= data.message
    });

    /*fetch("http://localhost:4180/oauth2/userinfo",{
      method: "GET",
      credentials: "include",
      mode: "cors"
    }).then((e) => console.log(e));*/
    });

    document.getElementById("btn-logout").addEventListener("click", () => {
      fetch("http://localhost:4180/oauth2/sign_out?rd=http://www.google.es").then((e) => {
        console.log("test2");
        console.log(e);
      });
    });

    document.getElementById("btn-data").addEventListener("click", () => {
      window.location.href="http://localhost:4180/api/protectedData"
    });
  </script>
</html>
